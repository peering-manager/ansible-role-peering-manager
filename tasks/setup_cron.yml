---
- name: Cron housekeeping
  ansible.builtin.cron:
    name: Housekeeping
    minute: 30
    hour: 3
    job: "cd {{ peering_manager_install_directory }} && venv/bin/python3 manage.py housekeeping"
    user: "{{ peering_manager_user }}"
    cron_file: peering_manager
  become: true
- name: Cron PeeringDB sync
  ansible.builtin.cron:
    name: Sync PeeringDB
    minute: 30
    hour: 2
    job: "cd {{ peering_manager_install_directory }} && venv/bin/python3 manage.py peeringdb_sync"
    user: "{{ peering_manager_user }}"
    cron_file: peering_manager
  become: true
- name: Cron configure routers
  ansible.builtin.cron:
    name: Configure Routers
    minute: 55
    job: "cd {{ peering_manager_install_directory }} && venv/bin/python3 manage.py configure_routers"
    user: "{{ peering_manager_user }}"
    cron_file: peering_manager
  become: true
- name: Cron poll BGP sessions
  ansible.builtin.cron:
    name: Poll BGP sessions
    minute: 0
    job: "cd {{ peering_manager_install_directory }} && venv/bin/python3 manage.py poll_bgp_sessions"
    user: "{{ peering_manager_user }}"
    cron_file: peering_manager
  become: true
- name: Cron grab prefixes
  ansible.builtin.cron:
    name: Grab prefixes
    minute: 30
    hour: 4
    job: "cd {{ peering_manager_install_directory }} && venv/bin/python3 manage.py grab_prefixes"
    user: "{{ peering_manager_user }}"
    cron_file: peering_manager
  become: true
